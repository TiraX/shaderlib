<% include header.ejs %>
  <div class="container">
    <!-- Dialog Modal -->
    <div class="modal fade" id="signinModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Sign in</h4></div>
          <div class="modal-body">
            <div id="signinAlert" class="alert alert-warning">
              <a href="#" class="close" data-dismiss="alert" aria-hidden="true">&times;</a></div>
            <form role="form" onsubmit="return false">
              <div class="form-group">
                <label for="name">Email</label>
                <input type="text" class="form-control" id="email" placeholder="Email@mail.com"></div>
              <div class="form-group">
                <label for="name">Password</label>
                <input type="password" class="form-control" id="pass"></div>
              <button type="submit" class="btn btn-primary btn-lg btn-block" id="login" data-loading-text="LOADING...">LOGIN</button></form>
            <hr class="divider" width="90%"></div>
          <div class="modal-footer">
            <p class="text-center">No account? Sign up for free!</p></div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
	$(function() {
        $("#signinAlert").hide();
        $("#login").click(function() {
          $(this).button('loading').delay(1000).queue(function() {});
          var email = $("#email").val();
          var pass = $("#pass").val();
          var data = {
            "email": email,
            "pass": pass
          };
          $.ajax({
            url: '/login',
            type: 'post',
            data: data,
            success: function(data, status) {
              if (status == 'success') {
                if (data.error == null) {
                  // sign in successful
                  $("#signinModal").modal('hide');
                  $("#login").button('reset');
                  location.reload();
                } else {
                  // sign in failed, show failed reason
                  $("#signinAlert").show();
                  $("#signinAlert").text(data.error);
                  $("#login").button('reset');
                }
              }
            },
            error: function(data, err, _err_thrown) {
              console.log(err);
            }
          });
        });
      });</script>
    <div class="modal fade" id="signupModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Sign up</h4></div>
          <div class="modal-body">
            <div id="signupAlert" class="alert alert-warning">
              <a href="#" class="close" data-dismiss="alert" aria-hidden="true">&times;</a></div>
            <form role="form" onsubmit="return false">
              <div class="form-group">
                <label for="name">Email</label>
                <input type="text" class="form-control" id="email_reg" placeholder="Email@mail.com"></div>
              <div class="form-group">
                <label for="name">User Name</label>
                <input type="text" class="form-control" id="username_reg" placeholder="User Name"></div>
              <div class="form-group">
                <label for="name">Password</label>
                <input type="password" class="form-control" id="pass_reg"></div>
              <div class="form-group">
                <label for="name">Password again</label>
                <input type="password" class="form-control" id="pass1_reg"></div>
              <button type="submit" class="btn btn-primary btn-lg btn-block" id="register" data-loading-text="CREATING...">CREATE ACCOUNT</button></form>
          </div>
          <hr class="divider" width="90%">
          <div class="modal-footer">
            <p class="text-center">Already have an account? Log in here</p></div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
	$(function() {
        $("#signupAlert").hide();
        $("#register").click(function() {
          $(this).button('loading').delay(1000).queue(function() {});
          var email = $("#email_reg").val();
          var username = $("#username_reg").val();
          var pass = $("#pass_reg").val();
          var pass1 = $("#pass1_reg").val();
          var data = {
            "email": email,
            "uname": username,
            "pass": pass,
            "pass1": pass1
          };
          $.ajax({
            url: '/reg',
            type: 'post',
            data: data,
            success: function(data, status) {
              if (status == 'success') {
                if (data.error == null) {
                  // sign up successful
                  $("#signupModal").modal('hide');
                  $("#register").button('reset');
                  location.reload();
                } else {
                  // sign up failed, show failed reason
                  $("#signupAlert").show();
                  $("#signupAlert").text(data.error);
                  $("#register").button('reset');
                }
              }
            },
            error: function(data, err, _err_thrown) {
              console.log(err);
            }
          });
        });
      });</script>
    <div class="row clearfix">
      <div class="col-md-12 column">
        <div class="navbar-wrapper">
          <div class="container" id="navcontainer">
            <nav class="navbar navbar-default navbar-fixed-top " role="navigation">
              <div class="container">
                <div class="navbar-header">
                  <a class="navbar-brand" href="#">ShaderLib</a></div>
                <ul class="nav navbar-nav">
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Explore
                      <strong class="caret"></strong></a>
                    <ul class="dropdown-menu">
                      <li>
                        <a href="#">Games</a></li>
                      <li>
                        <a href="#">Cars</a></li>
                    </ul>
                  </li>
                </ul>
                <form class="navbar-form navbar-left" role="search">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="Search"></div>
                  <button type="submit" class="btn btn-default">Search</button></form>
                <div class="navbar-right">
                  <ul class="nav navbar-nav">
                    <% if (!user) { %>
                      <li>
                        <button type="button" class="btn btn-primary navbar-btn" data-toggle="modal" data-target="#signupModal">Sign up</button>
                        <button type="button" class="btn btn-default navbar-btn" data-toggle="modal" data-target="#signinModal">Sign in</button></li>
                      <% } else { %>
                        <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <strong>
                              <%= user.name %></strong>
                            <strong class="caret"></strong>
                          </a>
                          <ul class="dropdown-menu">
                            <li>
                              <a href="#">Profile</a></li>
                            <li>
                              <a href="#">Settings</a></li>
                            <li>
                              <a href="/logout">Logout</a></li>
                          </ul>
                        </li>
                        <% } %></ul>
                </div>
              </div>
            </nav>
          </div>
        </div>
        <blockquote>
          <p>
            <br></p>
        </blockquote>
        <div class="carousel slide" id="carousel-721346">
          <ol class="carousel-indicators">
            <li class="active" data-slide-to="0" data-target="#carousel-721346"></li>
            <li data-slide-to="1" data-target="#carousel-721346"></li>
            <li data-slide-to="2" data-target="#carousel-721346"></li>
          </ol>
          <div class="carousel-inner">
            <div class="item active">
              <img alt="" src="images/index_slide1.jpg" />
              <div class="carousel-caption">
                <h4>First Thumbnail label</h4>
                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              </div>
            </div>
            <div class="item">
              <img alt="" src="images/index_slide2.jpg" />
              <div class="carousel-caption">
                <h4>Second Thumbnail label</h4>
                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              </div>
            </div>
            <div class="item">
              <img alt="" src="images/index_slide3.jpg" />
              <div class="carousel-caption">
                <h4>Third Thumbnail label</h4>
                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
              </div>
            </div>
          </div>
          <a class="left carousel-control" href="#carousel-721346" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
          </a>
          <a class="right carousel-control" href="#carousel-721346" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
          </a>
        </div>
      </div>
    </div>
    <div class="row clearfix">
      <div class="col-md-12 column">
        <div class="row">
          <div class="col-md-4">
            <div class="thumbnail">
              <img alt="300x200" src="images/index_thumb1.jpg" />
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                <p>
                  <a class="btn btn-primary" href="#">Action</a>
                  <a class="btn" href="#">Action</a></p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="thumbnail">
              <img alt="300x200" src="images/index_slide2.jpg" />
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                <p>
                  <a class="btn btn-primary" href="#">Action</a>
                  <a class="btn" href="#">Action</a></p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="thumbnail">
              <img alt="300x200" src="images/index_slide3.jpg" />
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                <p>
                  <a class="btn btn-primary" href="#">Action</a>
                  <a class="btn" href="#">Action</a></p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="thumbnail">
              <img alt="300x200" src="images/index_slide3.jpg" />
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
                <p>
                  <a class="btn btn-primary" href="#">Action</a>
                  <a class="btn" href="#">Action</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <% include footer.ejs %>